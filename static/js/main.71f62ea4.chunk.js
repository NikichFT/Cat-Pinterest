(this["webpackJsonpcat-pinterest"]=this["webpackJsonpcat-pinterest"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n.n(c),i=n(19),o=n.n(i),a=(n(27),n(17)),l=n(11),u=n(2),r=(n(28),n(29),n(30),n(31),n(8)),d=n(1);var k=function(t){var e=t.textButton,n=t.link;return Object(d.jsx)(r.b,{className:"nav__item",to:n,activeStyle:{color:"#FFFFFF",background:" #21cc99"},children:e})};var f=function(){return Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsx)(k,{link:"/all-posts",textButton:"\u0412\u0441\u0435 \u043a\u043e\u0442\u0438\u043a\u0438"}),Object(d.jsx)(k,{link:"/liked-posts",textButton:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u043a\u043e\u0442\u0438\u043a\u0438"})]})};var j=function(){return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)(f,{})})};n(38),n(39),n(40);var h=function(t){t.catPost;var e=t.likeCat,n=t.unlikeCat,c=t.likeButton;return Object(d.jsx)("button",{className:"like-button ".concat(c?"_liked":""," "),onClick:function(){c?n():e()}})};n(41);var b=function(t){var e=t.catPost,n=t.likePost,s=t.unlikePost,i=t.catLikedPosts,o=t.catPosts,a=Object(c.useState)(!1),u=Object(l.a)(a,2),r=u[0],k=u[1];return Object(c.useEffect)((function(){i.forEach((function(t){t.image_id===e.id&&(e.id=t.id,console.log(t.id))}))}),[i]),Object(c.useEffect)((function(){e.image_id&&k(!0),e.like&&k(!0)}),[]),Object(d.jsx)("li",{className:"post",style:{backgroundImage:"url(".concat(e.url||e.image.url,")")},children:Object(d.jsx)(h,{likeButton:r,catPost:e,likeCat:function(){e.like=!0,k(!0),n(e.id),console.log("catpost",e)},unlikeCat:function(){e.like=!1,k(!1),s(e.id),e.image_id?o.forEach((function(t){t.id===e.id&&(t.like=!1,t.id=e.image_id)})):i.forEach((function(t){t.id===e.id&&(e.id=t.image_id)}))},likePost:n})})},p=function(t){var e=t.catPosts,n=t.likePost,c=t.unlikePost,s=t.catLikedPosts;return Object(d.jsxs)("ul",{className:"posts-grid",children:[" ",e.map((function(t){return Object(d.jsx)(b,{unlikePost:c,catPost:t,catLikedPosts:s,likePost:n,catPosts:e},t.id)}))," "]})};var P=function(t){var e=t.catPosts,n=t.likePost,c=t.unlikePost,s=t.catLikedPosts;return Object(d.jsx)(p,{unlikePost:c,likePost:n,catPosts:e,catLikedPosts:s})};n(42);var g=function(t){var e=t.catLikedPosts,n=t.unlikePost,c=t.likePost,s=t.catPosts;return 0===e.length?Object(d.jsxs)("div",{className:"no-cats",children:[Object(d.jsx)("img",{className:"no-cats-img",alt:"",src:"https://www.tynker.com/projects/images/5c00182b4b12d530fa6dc8d9/no-toche---5845e10e7733c3558233c0ea.png"}),Object(d.jsx)("div",{className:"no-cats-title",children:"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043b\u044e\u0431\u0438\u043c\u044b\u0445 \u043a\u043e\u0442\u0438\u043a\u043e\u0432"})]}):Object(d.jsx)("ul",{className:"posts-grid",children:e.map((function(t){return Object(d.jsx)(b,{likePost:c,unlikePost:n,catPosts:s,catLikedPosts:e,catPost:t},t.id)}))})},O=n(21),m=n(22),x=new(function(){function t(e){var n=this;Object(O.a)(this,t),this.getCatList=function(){return fetch("".concat(n._url,"/images/search?limit=10&_page=10"),{headers:{"Content-Type":"application/json","x-api-key":n._key}}).then(n._checkResult)},this.getSavedCat=function(){return fetch("".concat(n._url,"/favourites"),{headers:{"Content-Type":"application/json","x-api-key":n._key}}).then(n._checkResult)},this.likeCat=function(t){return fetch("".concat(n._url,"/favourites"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":n._key},body:JSON.stringify({image_id:t})}).then(n._checkResult)},this.unlikeCat=function(t){return fetch("".concat(n._url,"/favourites/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json","x-api-key":n._key}}).then(n._checkResult)},this._url=e.url,this._headers=e.headers,this._key=e.key}return Object(m.a)(t,[{key:"_checkResult",value:function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status))}}]),t}())({url:"https://api.thecatapi.com/v1",headers:{"Content-Type":"application/json","x-api-key":"30271cfe-da2e-4b5c-bde0-32813f78a055"},key:"30271cfe-da2e-4b5c-bde0-32813f78a055"});var v=function(){var t=Object(c.useState)([]),e=Object(l.a)(t,2),n=e[0],s=e[1],i=Object(c.useState)([]),o=Object(l.a)(i,2),r=o[0],k=o[1];Object(c.useEffect)((function(){x.getCatList().then((function(t){s([].concat(Object(a.a)(n),Object(a.a)(t)))})).catch((function(t){return console.log(t)}))}),[]),console.log(n),Object(c.useEffect)((function(){x.getSavedCat().then((function(t){k(t),console.log("likedCat",t)})).catch((function(t){return console.log(t)}))}),[]),console.log("LikedcatPosts",0===r.length);var f=function(){x.getSavedCat().then((function(t){localStorage.setItem("likedPosts",JSON.stringify(t)),k(JSON.parse(localStorage.getItem("likedPosts"))),console.log("likedCats",t)})).catch((function(t){return console.log(t)}))},h=function(t){x.likeCat(t).then((function(){f()}))},b=function(t){x.unlikeCat(t).then((function(){f()}))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(j,{}),Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{path:"/all-posts",children:Object(d.jsx)(P,{unlikePost:b,likePost:h,catPosts:n,catLikedPosts:r})}),Object(d.jsx)(u.a,{path:"/liked-posts",children:Object(d.jsx)(g,{unlikePost:b,likePost:h,catPosts:n,catLikedPosts:r})})]})]})},_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),c(t),s(t),i(t),o(t)}))};o.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(r.a,{children:Object(d.jsx)(v,{})})}),document.getElementById("root")),_()}},[[43,1,2]]]);
//# sourceMappingURL=main.71f62ea4.chunk.js.map